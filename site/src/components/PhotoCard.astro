---
import type { PhotoItem } from "../types";

type Props = {
  photo: PhotoItem;
};

const { photo } = Astro.props;
---

<article class="card surface">
  <a href={`/photo/${photo.slug}/`} class="preview-link">
    <img loading="lazy" src={photo.imageUrl} alt={photo.title} />
  </a>
  <div class="content">
    <h3><a href={`/photo/${photo.slug}/`}>{photo.title}</a></h3>
    <p class="meta">
      {photo.date ?? "No date"}
      {photo.location ? ` Â· ${photo.location}` : ""}
    </p>
    <div class="chips">
      {photo.categories.map((category) => (
        <a class="chip" href={`/category/${encodeURIComponent(category)}/`}>
          {category}
        </a>
      ))}
    </div>
  </div>
</article>

<style>
  .card {
    overflow: hidden;
    transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease;
    animation: fadeUp 360ms ease both;
    break-inside: avoid;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 18px 42px rgba(7, 28, 33, 0.18);
    border-color: rgba(0, 122, 103, 0.4);
  }

  .preview-link {
    display: block;
    background: linear-gradient(135deg, #dbe7e4 0%, #ebf2f0 100%);
  }

  img {
    width: 100%;
    height: auto;
    object-fit: contain;
    display: block;
    transition: transform 280ms ease;
  }

  .card:hover img {
    transform: scale(1.04);
  }

  .content {
    padding: 0.55rem 0.7rem 0.65rem;
  }

  h3 {
    margin: 0 0 0.15rem;
    font-size: 0.96rem;
    line-height: 1.2;
    font-weight: 600;
  }

  .meta {
    margin: 0;
    color: var(--muted);
    font-size: 0.76rem;
  }

  .chips {
    margin-top: 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
  }
</style>
